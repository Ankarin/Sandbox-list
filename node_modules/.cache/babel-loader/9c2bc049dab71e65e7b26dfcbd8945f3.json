{"ast":null,"code":"import _toConsumableArray from \"/home/cubex/my finished projects/Nested Lists/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/cubex/my finished projects/Nested Lists/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/cubex/my finished projects/Nested Lists/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.scss\";\nimport List from \"./List\";\nimport AddItem from \"./AddItem\";\nimport TestMongo from './testMongo';\nimport axios from 'axios';\n\nfunction App(props) {\n  // Data base\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  useEffect(function () {\n    axios.get('http://localhost:3001/list/').then(function (response) {\n      setList(response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []); // Function to move elevemnts up and down array\n\n  var move = function move(array, from, to) {\n    var def = array[from];\n    console.log(def.sortKey);\n    array[from].sortKey = array[to].sortKey;\n    array[to].sortKey = def.sortKey;\n    return array;\n  };\n\n  var addItem = function addItem(message) {\n    var currentIds = list.map(function (data) {\n      return data.id;\n    });\n    var idToBeAdded = 0;\n\n    while (currentIds.includes(idToBeAdded)) {\n      ++idToBeAdded;\n    }\n\n    var newList = [].concat(_toConsumableArray(list), [{\n      id: idToBeAdded,\n      sortKey: idToBeAdded,\n      message: message\n    }]);\n    setList(newList);\n    axios.post(\"http://localhost:3001/list/add\", {\n      sortKey: idToBeAdded,\n      message: message,\n      nested: {}\n    });\n    console.log(message, idToBeAdded);\n  };\n\n  var removeItem = function removeItem(index, sortKey) {\n    var newList = _toConsumableArray(list);\n\n    newList.splice(index, 1);\n    setList(newList);\n    var objIdToDelete = null;\n    list.forEach(function (dat) {\n      console.log(index);\n\n      if (dat.id === index) {\n        objIdToDelete = dat._id;\n      }\n    });\n    axios.delete(\"http://localhost:3001/list/\" + list[index]._id, {\n      data: {\n        _id: objIdToDelete\n      }\n    });\n  }; // Move elements in array up and down\n\n\n  var Up = function Up(id, array) {\n    var newList = _toConsumableArray(list); // setList(newList)\n\n\n    setList(move(newList, id, id - 1));\n  };\n\n  var Down = function Down(id, array) {\n    var newList = _toConsumableArray(list); // setList(newList)\n\n\n    setList(move(newList, id, id + 1));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"app\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"list-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, list.sort(function (a, b) {\n    return a.sortKey - b.sortKey;\n  }).map(function (item, index) {\n    return React.createElement(\"div\", {\n      key: item._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(List, {\n      index: item.id,\n      id: list.indexOf(item),\n      item: item,\n      removeItem: removeItem,\n      Up: Up,\n      Down: Down,\n      list: list,\n      addItem: addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }));\n  }), React.createElement(AddItem, {\n    addItem: addItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/cubex/my finished projects/Nested Lists/src/App.js"],"names":["React","useState","useEffect","List","AddItem","TestMongo","axios","App","props","list","setList","get","then","response","data","catch","error","console","log","move","array","from","to","def","sortKey","addItem","message","currentIds","map","id","idToBeAdded","includes","newList","post","nested","removeItem","index","splice","objIdToDelete","forEach","dat","_id","delete","Up","Down","sort","a","b","item","indexOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.scss\";\nimport List from \"./List\";\nimport AddItem from \"./AddItem\";\nimport TestMongo from './testMongo';\nimport axios from 'axios'\n\nfunction App(props) {\n\n  // Data base\n  const [list, setList] = useState([\n\n\n\n  ]);\n  useEffect(()=> {\n    axios.get('http://localhost:3001/list/')\n        .then(response => {\n          \n          setList(response.data)\n          \n        })\n        \n        .catch((error) => {\n          console.log(error);\n        })\n        \n  }, [])\n\n\n// Function to move elevemnts up and down array\n  const move = (array, from, to,) => {\n    const def = array[from];\n    console.log(def.sortKey)\n    array[from].sortKey = array[to].sortKey;\n    array[to].sortKey = def.sortKey;\n    return array\n}\n  const addItem = message => {\n    let currentIds = list.map(data => data.id);\n    let idToBeAdded = 0;\n    while (currentIds.includes(idToBeAdded)) {\n      ++idToBeAdded;\n    }\n    \n    const newList = [...list, { id: idToBeAdded, sortKey:idToBeAdded, message }];\n    setList(newList);\n    axios.post(\"http://localhost:3001/list/add\", { \n      \n      sortKey:idToBeAdded,\n      message: message,\n      nested:{}\n      \n      });\n\n    \n      console.log(message, idToBeAdded)\n  };\n  const removeItem = (index, sortKey) => {\n   \n    const newList = [...list];\n    newList.splice(index, 1);\n    setList(newList);\n    let objIdToDelete = null;\n    list.forEach(dat => {\n      console.log(index)\n      if (dat.id === index) {\n        objIdToDelete = dat._id;\n      }\n    });\n\n    axios.delete(\"http://localhost:3001/list/\"+list[index]._id, {\n      data: {\n        _id: objIdToDelete,\n        \n      }\n    });\n\n\n\n\n  };\n  // Move elements in array up and down\nconst Up = (id, array) => {\n  const newList = [...list]\n  // setList(newList)\n   setList(move(newList, id, id-1))\n  \n  \n}\nconst Down = (id, array) => {\n  const newList = [...list]\n  // setList(newList)\n   setList(move(newList, id, id+1))\n   \n}\n\n\n\n\n\n\n  return (\n    <div className=\"app\">\n      <div className=\"list-item\">\n     \n        {list.sort((a, b)=>a.sortKey - b.sortKey).map((item, index) => (\n          <div key={item._id}>\n          <List\n            \n            index={item.id}\n            id={list.indexOf(item)}\n            item={item}\n            removeItem={removeItem}\n            Up={Up}\n            Down={Down}\n            list={list}\n            addItem={addItem}\n            \n          /> \n          \n          </div>\n        ))}\n        \n        <AddItem addItem={addItem} />\n\n        \n      </div>\n      \n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}